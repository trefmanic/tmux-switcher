<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>tmux Window Switcher</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body><div style="width: 320px;">
  <h1>tmux Windows</h1>
  <div id="wins"></div>
<script>
async function refresh() {
  const resp = await fetch('/windows');
  const data = await resp.json();
  const container = document.getElementById('wins');
  container.innerHTML = '';
  data.forEach(win => {
    const wrap = document.createElement('div');
    wrap.style.display = 'flex';
    wrap.style.alignItems = 'center';
    wrap.style.marginBottom = '6px';

    const a = document.createElement('a');
    a.className = 'btn';
    a.href = `/switch/${win.id}`;
    a.textContent = `${win.id}: ${win.name}`;
    a.style.flex = '1';

    const close = document.createElement('button');
    close.className = 'close';
    close.textContent = 'âœ•';
    close.title = 'Close window';
    close.onclick = async (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (!confirm('Kill tmux window ' + win.id + '?')) return;
      await fetch(`/close/${win.id}`, { method: 'POST' });
      refresh();
    };
    wrap.appendChild(a);
    wrap.appendChild(close);
    container.appendChild(wrap);
  });
}
// initial load
refresh();
//setInterval(refresh, 3000);
</script>
</div></body>
</html>